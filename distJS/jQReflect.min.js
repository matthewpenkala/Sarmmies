!function(s){function i(r,i,n){var h,t=s(this);function o(){var t=s(r),e=t.attr("width"),a=t.attr("height");h.width=e,h.height=a*(1+n);t=h.getContext("2d");t.drawImage(r,0,0,e,a),t.save(),t.translate(0,2*a),t.save(),t.transform(1,0,0,-1,0,0),function(t,e,a,r,i,n){t.drawImage(e,0,0,a,r);for(var h=t.getImageData(0,r,a,i),o=0;o<i;o++)for(var s=0;s<e.width;s++)h.data[4*(s+o*e.width)+3]=n-+o/i*n;t.putImageData(h,0,e.height)}(t,this,e,a,h.height-a,i),t.restore(),t.restore(),s(h).replaceAll(r).append(r),s(this).unbind(o)}return"img"==this.tagName.toLowerCase()&&(h=document.createElement("canvas"),s(h).attr("title",s(r).attr("title")).attr("alt",s(r).attr("alt")),this.complete?o.apply(this):(console.log("binding"),s(this).bind("onload",o)),t=h),t}s.fn.reflect=function(t){var e=jQuery.extend({startOpacity:.6,reflectionScale:.5},t);if(!document.createElement("canvas").getContext)return this;for(var a=0;a<this.length;a++){var r=this[a];this[a]=i.apply(r,[r,255<255*e.startOpacity?255:255*e.startOpacity,e.reflectionScale])}return this}}(jQuery);